---
import { CATEGORIES } from '@/consts/categories.ts';
---

<div class="flex flex-wrap justify-center gap-2">
  <button
    class="category-filter active rounded-full border-2 border-gray-400 px-6 py-2 font-semibold text-gray-700 transition-colors hover:border-blue-500 hover:text-blue-600"
    data-category="todas"
  >
    Todas
  </button>
  {
    CATEGORIES.map(category => (
      <button
        class="category-filter rounded-full border-2 border-gray-400 px-6 py-2 font-semibold text-gray-700 capitalize transition-colors hover:border-blue-500 hover:text-blue-600"
        data-category={category}
      >
        {category}
      </button>
    ))
  }
</div>

<script>
  const categoryFilters = document.querySelectorAll('.category-filter');

  categoryFilters.forEach(filter => {
    filter.addEventListener('click', () => {
      categoryFilters.forEach(btn => btn.classList.remove('active'));
      filter.classList.add('active');

      const category = filter.getAttribute('data-category');
      filter.dispatchEvent(
        new CustomEvent('filter-category-change', {
          detail: { category },
          bubbles: true,
        })
      );
    });
  });
</script>

<style>
  .active {
    border-color: var(--color-blue-600);
    background: var(--color-blue-600);
    color: var(--color-white);
  }
</style>
